name: user.api

on:
  push:
    branches:
      - staging
    paths:
      - 'microservices/user/*'

jobs:
  checkError:
    name: Check Error
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
        uses: actions/checkout@v2
          with:
            ref: 'develop'
        #- name: Install yarn
        #  run: npm install -g yarn
        - name: Install dependencies
          run: yarn
        - name: Lint
          run: yarn run lint
        #- name: Test
        #  run: yarn run test
        - name: Build local
          run: yarn run build
  pushImage:
    name: Build and publish docker image
    needs: checkError
    steps:
      - name: Build docker
        run: yarn run docker:build:staging